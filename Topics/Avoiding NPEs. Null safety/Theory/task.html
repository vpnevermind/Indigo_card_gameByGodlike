<div class="step-text">
<p><a class="theory-lookup not-relevant" href="/learn/step/7619" rel="noopener noreferrer nofollow" target="_blank" title="In Kotlin, null safety is a crucial feature in the language's design that addresses the issue of null references in programming, often referred to as the billion dollar mistake. | In Kotlin, types are non-nullable by default, and if you attempt to assign or return null to a non-nullable variable, the compiler will give an error. To permit a variable to carry a null value, you must declare it as nullable by adding a ? to its type. Kotlin offers several mechanisms to deal with nullable types securely, such as safe call (), elvis operator (), safe casting (), and let function.">Null safety</a> is a crucial feature in Kotlin's design, addressing the notorious 'Billion Dollar Mistake'â€”the use of <a class="theory-lookup not-relevant" href="/learn/step/7619" rel="noopener noreferrer nofollow" target="_blank" title="In Kotlin, a null reference refers to the concept of a variable that does not refer to any object or value. | It is a type of reference that can be assigned a null value, indicating the absence of a value. This is different from non-null references, which are always guaranteed to refer to an object or value. The introduction of null references in programming languages has been described as a billion-dollar mistake due to the numerous errors and vulnerabilities it has caused. In languages like Java, every type is nullable, which means that null checks are often not required and can lead to program crashes. In Kotlin, nullable types are distinguished from non-nullable types, and the language provides null safety features such as the safe call syntax, which allows for more concise and safer code when dealing with potentially null objects.">null references</a> in programming. Kotlin's <a class="theory-lookup not-relevant" href="/learn/step/7619" rel="noopener noreferrer nofollow" target="_blank" title="In Kotlin, a type system is a set of rules that define the allowed types of data and operations that can be performed on them. | It is a crucial concept in statically typed languages like Kotlin, where type relationships are checked at compile time. A type defines a set of valid values within a domain and a set of appropriate and consistent operations for the established value domain. In a hierarchical relationship, a subtype is a type that is related to another type (the supertype), inheriting all its characteristics (valid values and operations), but it may also have additional values or operations or restrict the value in some way.">type system</a> aims to get rid of null references, which commonly lead to bugs and crashes in software development. Let's learn how to work with <a class="theory-lookup not-relevant" href="/learn/step/7619" rel="noopener noreferrer nofollow" target="_blank" title="In Kotlin, a nullable type is a variable that can hold a null value, in contrast to a non-nullable type, which cannot. | This is a key feature of Kotlin's null safety, which aims to eliminate null reference errors. In Kotlin, types are non-nullable by default, and if you want to declare a variable that can hold a null value, you must append a question mark to the type. When working with nullable types, Kotlin requires you to handle the possibility of a null value explicitly, making your code safer and more predictable.">nullable types</a>.</p>
<h5 id="save-calls">Save calls</h5>
<p>Suppose you have a nullable String and want to get its length. In Kotlin, you can't directly get it in a simple way::</p>
<pre><code class="language-kotlin">val name: String? = "Kotlin"
val length = name.length // Compilation error </code></pre>
<p>If you need to have access to properties or call methods of a nullable object, you must check if it's <code class="language-kotlin">null</code> first. You can do it like this:</p>
<pre><code class="language-kotlin">val name: String? = "Kotlin"
val length = if (name != null) name.length else null </code></pre>
<p>But it's quite a long expression! You can get the same result if you use the safe call operator <code class="language-kotlin">?.</code> that allows you to access properties or call methods on nullable variables without risking a <code class="language-kotlin">NullPointerException</code>:</p>
<pre><code class="language-kotlin">val name: String? = "Kotlin"
val length = name?.length // length is null if name is null</code></pre>
<p style="text-align: start;">That's it! Just add a <code class="language-kotlin">?</code> sign every time right after a nullable reference. <code class="language-kotlin">?.</code> will compare its value to <code class="language-kotlin">null</code> and return <code class="language-kotlin">null</code> if that reference is <code class="language-kotlin">null</code>. It's even more convenient for chains. Here is an example of two <a class="theory-lookup not-relevant" href="/learn/step/7619" rel="noopener noreferrer nofollow" target="_blank" title="In Kotlin, a safe call is a way to call a member function or property accessor on an object that may be null, without causing a NullPointerException. | It is denoted by the `?.` syntax, which means if the object is not null, call the member function or access the property; otherwise, return null. This allows for more concise and safer code, especially when dealing with potentially null objects. It is particularly useful in situations where the object being called on may not always be initialized or may be null due to asynchronous operations or data fetching.">safe calls</a> in a row:</p>
<pre><code class="language-kotlin">val street = city?.address?.street // the same as the next expression

val street = if (city != null &amp;&amp; city.address != null) 
    city.address.street else null</code></pre>
<h5 id="elvis-operator">Elvis Operator</h5>
<p style="text-align: start;">Kotlin has another interesting way of handling nullable variables. Let's take a look at this snippet:</p>
<pre><code class="language-kotlin">var name: String? = "Kotlin"
val length: Int? = name?.length
print(if (length != null) length else 0)</code></pre>
<p style="text-align: start;">As you see, <code class="language-kotlin">length</code> variable will be <code class="language-kotlin">null</code> in case of <code class="language-kotlin">null</code> in the <code class="language-kotlin">name</code> variable. But if we want to print <code class="language-kotlin">0</code> if <code class="language-kotlin">length</code> is <code class="language-kotlin">null</code>, we need to add an additional check. It's a bit clumsy. However, we can simplify the code with the<strong> Elvis operator</strong>:</p>
<pre><code class="language-kotlin">var name: String? = "Kotlin"
val length: Int? = name?.length
print(length ?: 0)</code></pre>
<p style="text-align: start;">The Elvis operator works like this: if the left-hand side of the expression (<code class="language-kotlin">name?.length</code>) is not <code class="language-kotlin">null</code>, return it; otherwise, return the right-hand side (0). You can also use <code class="language-kotlin">return</code> and <code class="language-kotlin">throw</code> expressions in the right part:</p>
<pre><code class="language-kotlin">val length: Int = name?.length ?: throw Exception("The name is null")</code></pre>
<p style="text-align: start;">You may ask, but why is it called Elvis? Look: there he is!</p>
<p style="text-align: start;"><source media="(max-width: 480px)" srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/480x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/960x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1440x/-/format/webp/ 3x" type="image/webp"/><source media="(max-width: 800px)" srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/800x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1600x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/2400x/-/format/webp/ 3x" type="image/webp"/><source srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1100x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/2200x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/3000x/-/format/webp/ 3x" type="image/webp"/><source media="(max-width: 480px)" srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/480x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/960x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1440x/-/format/webp/ 3x" type="image/webp"/><source media="(max-width: 800px)" srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/800x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1600x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/2400x/-/format/webp/ 3x" type="image/webp"/><source srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1100x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/2200x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/3000x/-/format/webp/ 3x" type="image/webp"/><source media="(max-width: 480px)" srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/480x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/960x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1440x/-/format/webp/ 3x" type="image/webp"/><source media="(max-width: 800px)" srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/800x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1600x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/2400x/-/format/webp/ 3x" type="image/webp"/><source srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1100x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/2200x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/3000x/-/format/webp/ 3x" type="image/webp"/><source media="(max-width: 480px)" srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/480x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/960x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1440x/-/format/webp/ 3x" type="image/webp"/><source media="(max-width: 800px)" srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/800x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1600x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/2400x/-/format/webp/ 3x" type="image/webp"/><source srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1100x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/2200x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/3000x/-/format/webp/ 3x" type="image/webp"/><source media="(max-width: 480px)" srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/480x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/960x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1440x/-/format/webp/ 3x" type="image/webp"/><source media="(max-width: 800px)" srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/800x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1600x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/2400x/-/format/webp/ 3x" type="image/webp"/><source srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1100x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/2200x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/3000x/-/format/webp/ 3x" type="image/webp"/><picture><source media="(max-width: 480px)" srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/480x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/960x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1440x/-/format/webp/ 3x" type="image/webp"/><source media="(max-width: 800px)" srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/800x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1600x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/2400x/-/format/webp/ 3x" type="image/webp"/><source srcset="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/1100x/-/format/webp/ 1x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/2200x/-/format/webp/ 2x,https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/-/stretch/off/-/resize/3000x/-/format/webp/ 3x" type="image/webp"/><img alt="" height="293" src="https://ucarecdn.com/70a56aca-5d34-4852-ae94-eeadf39527c7/" width="264"/></picture></p>
<h5 id="the-not-null-assertion-operator">The Not-Null Assertion Operator</h5>
<p style="text-align: start;">There is an easy way to invoke an NPE: the not-null assertion operator<code class="language-kotlin">!!</code>. The code won't <a class="theory-lookup not-relevant" href="/learn/step/7619" rel="noopener noreferrer nofollow" target="_blank" title="In Kotlin, a crash refers to a situation where a program terminates abnormally due to a run-time error. | A run-time error is an error that occurs during the execution of a program, as opposed to a compile-time error that is caught during the compilation process. A crash can be caused by two main types of run-time errors: logic errors and unhandled exceptions. Logic errors occur when a program produces an incorrect result due to incorrect code, while unhandled exceptions include errors such as division by zero, file not found, and others. When a crash occurs, a stack trace is generated, which provides information about the program state and the sequence of function calls that led to the error.">crash</a> only if you're 100% sure that your variable won't be <code class="language-kotlin">null</code>:</p>
<pre><code class="language-kotlin">var name: String? = "Kotlin"
print(name!!.length)</code></pre>
<p style="text-align: start;">The code above looks like it's screaming, trying to scare the compiler. The piece of code above is almost equivalent to the one below:</p>
<pre><code class="language-kotlin">var name: String? = "Kotlin"
val length: Int = name?.length ?: throw NullPointerException()
print(length)</code></pre>
<p style="text-align: start;">This operator is used to stop the program when <code class="language-kotlin">null</code> is encountered. The <code class="language-kotlin">!!</code> operator asserts that the value is non-null, and if it's actually null, a <code class="language-kotlin">NullPointerException</code> is thrown immediately. This is contrary to Kotlin's philosophy of null safety and should be used sparingly. Why <code class="language-kotlin">!!</code> overuse is problematic:</p>
<ol><li><p><strong>Defeats Null Safety</strong>: Kotlin's type system is designed to handle nulls gracefully. Overusing <code class="language-kotlin">!!</code> bypasses these safety measures.</p></li><li><p><strong>Code Smell</strong>: Regular use often indicates a disregard for proper null checks and can lead to code that's less stable and more challenging to maintain.</p></li><li><p><strong>Unexpected Crashes</strong>: It can cause your application to crash unexpectedly if proper null checks are not done before using <code class="language-kotlin">!!</code>.</p></li></ol>
<h5 id="best-practices-for-null-safety-in-kotlin">Best Practices for Null Safety in Kotlin</h5>
<p>Kotlin's type system is designed to eliminate the danger of null references from the code, also known as the Billion Dollar Mistake. Here are some best practices to enforce null safety:</p>
<ol><li><p><strong>Use Nullable Types Wisely</strong>: Only use nullable types (<code class="language-kotlin">Type?</code>) when a variable can indeed be <code class="language-kotlin">null</code>. If a variable should not be <code class="language-kotlin">null</code>, use a <a class="theory-lookup not-relevant" href="/learn/step/7619" rel="noopener noreferrer nofollow" target="_blank" title="In Kotlin, a non-nullable is a type that cannot hold a null value. | Unlike Java, where all reference types can hold null values, Kotlin makes a distinction between nullable and non-nullable types. By making types non-nullable by default and providing explicit nullable types, Kotlin compels developers to handle the possibility of null values in a controlled way. This helps to reduce the risk associated with null references, often referred to as the billion-dollar mistake. Safe call and the elvis operator are two features in Kotlin that help handle nullable types securely and prevent null pointer exceptions. Safe call allows you to access properties and methods of a nullable object without the risk of a null pointer exception.">non-nullable</a> type.</p></li><li><p><strong>Safe Calls (</strong><code class="language-kotlin">?.</code>): Use the safe call operator when accessing properties or methods on a nullable object. This will return <code class="language-kotlin">null</code> if the object is <code class="language-kotlin">null</code> instead of throwing a <code class="language-kotlin">NullPointerException</code>.</p><pre><code class="language-kotlin">val length = nullableString?.length</code></pre></li><li><p><strong>Elvis Operator (</strong><code class="language-kotlin">?:</code>): The Elvis operator lets you offer an alternative value if an expression evaluates to <code class="language-kotlin">null</code>.</p><pre><code class="language-kotlin">val length = nullableString?.length ?: 0</code></pre></li><li><p><strong>Non-Null Assertion (</strong><code class="language-kotlin">!!</code>): Use this operator only when you are certain that the value is not <code class="language-kotlin">null</code>. It will throw a <code class="language-kotlin">NullPointerException</code> if the value is <code class="language-kotlin">null</code>.</p><pre><code class="language-kotlin">val length = nullableString!!.length</code></pre></li></ol>
<p>By following these practices and utilizing Kotlin's <a class="theory-lookup not-relevant" href="/learn/step/7619" rel="noopener noreferrer nofollow" target="_blank" title="In Kotlin, a standard library is a fundamental part of the Kotlin programming language that is included with the language and provides essential functionality for working with the language. | It offers a robust set of tools to handle various programming tasks efficiently, and it is designed to work seamlessly with Kotlin's language features. The standard library includes functions, classes, and methods that provide pre-built functionality, which can be invoked or used in your code, saving you the time and effort of writing these functionalities from scratch. Examples of functionalities provided by the Kotlin standard library include handling complex math calculations like the sine and cosine of an angle. Standard libraries can be categorized into those that are included with the language and provide essential functionality, and third-party libraries that offer specialized or advanced features.">standard library</a> functions, you can write more robust and null-safe code. Remember, the key to avoiding <code class="language-kotlin">NullPointerException</code> is to write code that communicates nullability explicitly and handles it gracefully.</p>
<h5 id="conclusion">Conclusion</h5>
<p>Kotlin's null safety features aim to reduce the risks associated with null references. By making types non-nullable by default and providing explicit nullable types, Kotlin compels developers to handle the possibility of null values in a controlled way. Use safe calls and the Elvis operator to handle nullable types securely and prevent <code class="language-kotlin">NullPointerException</code>.</p>
</div>